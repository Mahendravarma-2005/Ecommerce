<div class="d-flex flex-column text-white h-100 p-2" style="width: 100%;"> 
    
    <div class="d-flex align-items-center mb-4 pt-1"> <i class="fas fa-list fs-3 me-2"></i> 
        <span class="ms-2 fw-bold text-warning" id="sidebar-logo-text" style="opacity: 0; white-space: nowrap; transition: opacity 0.3s ease;">ElectroMart âš¡</span>
    </div>

    <div class="d-flex flex-column">
        {% with current_path=request.path %}
            
            {% comment %} Link 1: Home {% endcomment %}
            <a href="{% url 'home' %}" class="btn text-start mb-2 d-flex align-items-center 
               {% if current_path == '/' or current_path == '/home/' %}btn-primary{% else %}btn-dark{% endif %}">
                <i class="fas fa-home fs-5"></i>
                <span class="ms-2 sidebar-link-text" style="opacity: 0; white-space: nowrap; transition: opacity 0.3s ease;">Home</span>
            </a>

            {% comment %} Link 2: Products {% endcomment %}
            <a href="{% url 'products_list' %}" class="btn text-start mb-2 d-flex align-items-center 
               {% if current_path == '/products/list/' %}btn-primary{% else %}btn-dark{% endif %}">
                <i class="fas fa-box fs-5"></i>
                <span class="ms-2 sidebar-link-text" style="opacity: 0; white-space: nowrap; transition: opacity 0.3s ease;">Products</span>
            </a>

            {% comment %} Link 3: Users {% endcomment %}
            <a href="{% url 'user_list' %}" class="btn text-start mb-2 d-flex align-items-center 
               {% if current_path == '/users/list/' %}btn-primary{% else %}btn-dark{% endif %}">
                <i class="fas fa-user-friends fs-5"></i>
                <span class="ms-2 sidebar-link-text" style="opacity: 0; white-space: nowrap; transition: opacity 0.3s ease;">Users</span>
            </a>
            
            {% comment %} Link 4: Profile (Placeholder) {% endcomment %}
            <a href="#" class="btn btn-dark text-start mb-2 d-flex align-items-center">
                <i class="fas fa-user fs-5"></i>
                <span class="ms-2 sidebar-link-text" style="opacity: 0; white-space: nowrap; transition: opacity 0.3s ease;">Profile</span>
            </a>
        
        {% endwith %}
    </div>

    <div class="mt-auto pt-3 border-top">
        <a href="{% url 'logout' %}" class="btn btn-outline-warning w-100">
            <i class="fas fa-sign-out-alt fs-5"></i>
            <span class="ms-2 sidebar-link-text" style="opacity: 0; white-space: nowrap; transition: opacity 0.3s ease;">Logout</span>
        </a>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.getElementById('sidebarMenu');
        const logoText = document.getElementById('sidebar-logo-text');
        const linkTexts = document.querySelectorAll('.sidebar-link-text');

        if (sidebar) {
            function updateTextVisibility() {
                const isOpen = sidebar.offsetWidth > 100;
                logoText.style.opacity = isOpen ? '1' : '0';
                linkTexts.forEach(span => {
                    span.style.opacity = isOpen ? '1' : '0';
                });
            }

            updateTextVisibility();
            sidebar.addEventListener('transitionend', updateTextVisibility);
        }
    });
</script>